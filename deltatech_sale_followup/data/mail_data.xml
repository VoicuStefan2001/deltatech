<?xml version='1.0' encoding='utf-8' ?>
<odoo>

    <record id="mail_template_sale_followup" model="mail.template">
        <field name="name">Sale Order: send followup</field>
        <field name="model_id" ref="sale.model_sale_order" />
        <field name="subject">{{object.company_id.name}} (Ref {{object.name or 'n/a' }})</field>
        <field name="email_from">{{(object.user_id.email_formatted or user.email_formatted) | safe}}</field>
        <field name="partner_to">{{object.partner_id.id}}</field>
        <field name="description">Sent to customers when a followup</field>
        <field name="body_html" type="html">
            <div style="margin: 0px; padding: 0px;">
                <p style="margin: 0px; padding: 0px; font-size: 12px;">
                    Dear
                    <t t-esc="object.partner_id.name" />
                    <t t-if="object.partner_id.parent_id">
                        (<t t-esc="object.partner_id.parent_id.name" />)
                    </t>,

                </p>
                <p>
                    We hope you are satisfied with your order "<strong t-out="object.name"/>"
                </p>
                <br />
                <div style="margin: 0px; padding: 0px;">
   <t t-foreach="object.order_line" t-as="line">
            <t t-if="(not hasattr(line, 'is_delivery') or not line.is_delivery) and line.display_type in ['line_section', 'line_note']">
                <table width="100%" style="color: #454748; font-size: 12px; border-collapse: collapse;">
                    <t t-set="loop_cycle_number" t-value="loop_cycle_number or 0" />
                    <tr t-att-style="'background-color: #f2f2f2' if loop_cycle_number % 2 == 0 else 'background-color: #ffffff'">
                        <t t-set="loop_cycle_number" t-value="loop_cycle_number + 1" />
                        <td colspan="4">
                            <t t-if="line.display_type == 'line_section'">
                                <span style="font-weight:bold;" t-out="line.name or ''">Taking care of Trees Course</span>
                            </t>
                            <t t-elif="line.display_type == 'line_note'">
                                <i t-out="line.name or ''">Taking care of Trees Course</i>
                            </t>
                        </td>
                    </tr>
                </table>
            </t>
            <t t-elif="(not hasattr(line, 'is_delivery') or not line.is_delivery)">
                <table width="100%" style="color: #454748; font-size: 12px; border-collapse: collapse;">
                    <t t-set="loop_cycle_number" t-value="loop_cycle_number or 0" />
                    <tr t-att-style="'background-color: #f2f2f2' if loop_cycle_number % 2 == 0 else 'background-color: #ffffff'">
                        <t t-set="loop_cycle_number" t-value="loop_cycle_number + 1" />
                        <td style="width: 150px;">
                            <img t-attf-src="/web/image/product.product/{{ line.product_id.id }}/image_128" style="width: 64px; height: 64px; object-fit: contain;" alt="Product image"></img>
                        </td>
                        <td align="left" t-out="line.product_id.name or ''">	Taking care of Trees Course</td>
                        <td width="15%" align="center" t-out="line.product_uom_qty or ''">1</td>
                        <td width="20%" align="right"><span style="font-weight:bold;">
                        <t t-if="object.website_id.show_line_subtotals_tax_selection == 'tax_excluded'">
                            <t t-out="format_amount(line.price_reduce_taxexcl, object.currency_id) or ''">$ 10.00</t>
                        </t>
                        <t t-else="">
                            <t t-out="format_amount(line.price_reduce_taxinc, object.currency_id) or ''">$ 10.00</t>
                        </t>
                        </span></td>
                    </tr>
                </table>
            </t>
        </t>
                </div>


            </div>
        </field>


        <field name="lang">{{object.partner_id.lang}}</field>
        <field name="auto_delete" eval="True" />
    </record>

</odoo>
